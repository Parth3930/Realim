import{n as u}from"./index.browser.OxPLOBIU.js";const s=document.getElementById("username-input"),v=document.getElementById("create-btn"),g=document.getElementById("create-password"),i=document.getElementById("join-input"),d=document.getElementById("join-password"),h=document.getElementById("join-btn"),f=document.getElementById("recent-rooms-container"),w=document.getElementById("empty-state"),y=document.getElementById("recent-rooms-list");try{const e="Anon "+Math.floor(Math.random()*1e3);s&&(s.value=e);const t=localStorage.getItem("realim-storage");if(t){const o=JSON.parse(t);o.state&&(o.state.username&&s&&(s.value=o.state.username),o.state.savedRooms&&o.state.savedRooms.length>0&&(f?.classList.remove("hidden"),w?.classList.add("hidden"),o.state.savedRooms.slice(0,4).forEach(r=>{const n=document.createElement("a");n.href=`/board/${r.id}`,n.className="flex items-center justify-between p-4 rounded-xl bg-white/5 hover:bg-white/10 border border-white/5 hover:border-primary/50 transition-all group relative overflow-hidden",n.innerHTML=`
                             <div class="absolute inset-0 bg-gradient-to-r from-primary/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"></div>
                            <div class="flex items-center gap-4 relative z-10">
                                <div class="w-10 h-10 rounded-full bg-gradient-to-br from-white/10 to-transparent flex items-center justify-center text-sm font-mono opacity-60 group-hover:opacity-100 group-hover:text-primary group-hover:scale-110 transition-all ring-1 ring-white/10">
                                  ${r.id.substring(0,2).toUpperCase()}
                                </div>
                                <div class="flex flex-col">
                                    <span class="font-bold text-white/90 group-hover:text-white tracking-wide">${r.id}</span>
                                    <span class="text-xs text-muted-foreground">Last visited ${new Date(r.lastVisited).toLocaleDateString()}</span>
                                </div>
                            </div>
                            <div class="relative z-10 flex items-center gap-2">
                                <button class="delete-room-btn p-2 bg-red-500/10 hover:bg-red-500/20 rounded-lg text-red-500 hover:text-red-400 transition-colors" data-room-id="${r.id}">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                        <path d="M3 6h18"/><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"/><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"/>
                                    </svg>
                                </button>
                                <div class="p-2 bg-white/5 rounded-lg text-muted-foreground group-hover:text-primary group-hover:bg-white/10 transition-colors">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M5 12h14"/><path d="m12 5 7 7-7 7"/></svg>
                                </div>
                            </div>
                        `,y?.appendChild(n);const c=n.querySelector(".delete-room-btn");c?.addEventListener("click",m=>{m.preventDefault(),m.stopPropagation();const a=c.getAttribute("data-room-id");a&&confirm(`Delete room "${a}" from your recent list?`)&&b(a)})})))}else p(e)}catch(e){console.error("Error reading store",e)}function p(e){try{const t=localStorage.getItem("realim-storage");let o=t?JSON.parse(t):{state:{userId:u(10),elements:{},savedRooms:[]},version:0};o.state.username=e,localStorage.setItem("realim-storage",JSON.stringify(o))}catch(t){console.error("Error saving store",t)}}function b(e){try{const t=localStorage.getItem("realim-storage");if(!t)return;const o=JSON.parse(t);o.state&&o.state.savedRooms&&(o.state.savedRooms=o.state.savedRooms.filter(r=>r.id!==e),localStorage.setItem("realim-storage",JSON.stringify(o)),window.location.reload())}catch(t){console.error("Error deleting room",t)}}s?.addEventListener("input",e=>{p(e.target.value)});v?.addEventListener("click",()=>{const e=u(10),t=g?g.value:"";t&&localStorage.setItem(`room_pass_${e}`,t),window.location.href=`/board/${e}`});const l=()=>{const e=i?i.value.trim():"";if(!e)return;const t=d?d.value:"";t&&sessionStorage.setItem(`join_pass_${e}`,t),window.location.href=`/board/${e}`};h?.addEventListener("click",l);i?.addEventListener("keydown",e=>e.key==="Enter"&&l());d?.addEventListener("keydown",e=>e.key==="Enter"&&l());
